# qiita-backup
Qiita に上げてる自分の記事をローカルにバックアップするためのバッチ。

# 環境
Windows でしか確認してない。  
（ファイル名の扱いとかが、 linux とかだとあやしいかも）

JDK 11 以上が必要。

# 使い方
## ビルドする
```
> gradlew build
```

`build/libs` の下に `qiita-backup-X.X.X.jar` が出力される。

## Qiita API のトークンを発行する

[アプリケーション - Qiita](https://qiita.com/settings/applications)

ここで「個人用アクセストークン」を発行する。

## トークンをファイルに保存する
ローカルに `qiita-token` という名前で空のテキストファイルを作成する。

中身に、先ほど発行したトークンをコピペする。  
（末尾は改行なしで、トークンのみにすること）

作成したら、 `qiita-backup-X.X.X.jar` と同じフォルダに `qiita-token` を配置する。

```
|-qiita-backup-X.X.X.jar
`-qiita-token
```

## 実行する
```
> java -jar qiita-backup-X.X.X.jar
```

トークンを使って認証して、ユーザーが投稿した全ての記事をローカルに保存する。

デフォルトでは、カレントフォルダ直下に `backup` というフォルダを作成し、その中に全ての記事が保存される。

# 保存先を変更する
```
> java -jar qiita-backup-X.X.X.jar --save.dir=path/to/save/dir
```

`--save.dir` を引数で指定することで、ファイルの保存先を指定できる。

# ファイルのローテーションについて
各記事は、 `<タイトル>_<id>.md` という名前でローカルに保存される。  
中身は、 Markdown テキスト。

実行するたびに記事の内容が更新されているかを確認し、更新されていれば再びローカルに保存する。

このとき、ローカルのファイルは最大 5 世代前までローテーションされる（最新と合わせると、 1 記事につき 6 つまでローカルに保存する）。

5 より古いファイルは削除される。

# リリースノート
- 2.0.0 (2020-03-27)
    - Java 11 対応
    - 使用しているライブラリやビルド環境を最新化
- 1.0.0
    - 初回リリース
